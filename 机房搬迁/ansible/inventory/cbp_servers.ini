# CBP业务系统服务器清单 - IP批量修改专用
# 当前使用A1机房IP地址: 192.168.13.x
# 目标A2机房IP地址: 192.168.28.x
# 用于CBP业务系统Nginx和前端配置的IP批量修改

[nebula_servers]
# Nebula图数据库服务器
nebula-s1 ansible_host=192.168.13.1 ansible_user=root hostname=nebula-s1 new_ip=192.168.28.1
nebula-s2 ansible_host=192.168.13.2 ansible_user=root hostname=nebula-s2 new_ip=192.168.28.2
nebula-s3 ansible_host=192.168.13.3 ansible_user=root hostname=nebula-s3 new_ip=192.168.28.3

[database_servers]
# 数据库服务器
mysql-s1 ansible_host=192.168.13.4 ansible_user=root hostname=mysql-s1 new_ip=192.168.28.4
oracle-s1 ansible_host=192.168.13.5 ansible_user=root hostname=oracle-s1 new_ip=192.168.28.5

[app_servers]
# 应用服务器 - 主要的CBP业务服务
app-s2 ansible_host=192.168.13.7 ansible_user=root hostname=app-s2 new_ip=192.168.28.6 services="综合搜索,线索侦查,群组挖掘,VoIP数据恢复"
app-s3 ansible_host=192.168.13.8 ansible_user=root hostname=app-s3 new_ip=192.168.28.7 services="案件系统,全息档案,基础库,安全检测,DDoS,运维监控"
app-s4 ansible_host=192.168.13.9 ansible_user=root hostname=app-s4 new_ip=192.168.28.8 services="网管系统,门户,权限中心,报表中心,统计分析"
app-s5 ansible_host=192.168.13.10 ansible_user=root hostname=app-s5 new_ip=192.168.28.9 services="公共组件,前端服务,Nginx主节点"
app-s6 ansible_host=192.168.13.11 ansible_user=root hostname=app-s6 new_ip=192.168.28.10 services="应用服务"
app-s7 ansible_host=192.168.13.12 ansible_user=root hostname=app-s7 new_ip=192.168.28.11 services="应用服务"
app-s8 ansible_host=192.168.13.13 ansible_user=root hostname=app-s8 new_ip=192.168.28.12 services="应用服务,NF信息中心"
app-s9 ansible_host=192.168.13.14 ansible_user=root hostname=app-s9 new_ip=192.168.28.13 services="应用服务"
app-s10 ansible_host=192.168.13.15 ansible_user=root hostname=app-s10 new_ip=192.168.28.14 services="应用服务"
app-s11 ansible_host=192.168.13.16 ansible_user=root hostname=app-s11 new_ip=192.168.28.15 services="应用服务"
app-s12 ansible_host=192.168.13.17 ansible_user=root hostname=app-s12 new_ip=192.168.28.16 services="应用服务"

[ai_servers]
# AI服务器
app-s21 ansible_host=192.168.13.30 ansible_user=root hostname=app-s21 new_ip=192.168.28.17 services="AI服务,垃圾邮件识别,银行短信识别,高频词服务,航班信息识别"
app-s22 ansible_host=192.168.13.31 ansible_user=root hostname=app-s22 new_ip=192.168.28.18 services="AI服务,垃圾邮件识别,银行短信识别,高频词服务,航班信息识别"

[redis_servers]
# Redis缓存服务器
redis-s1 ansible_host=192.168.13.78 ansible_user=root hostname=redis-s1 new_ip=192.168.28.19
redis-s2 ansible_host=192.168.13.79 ansible_user=root hostname=redis-s2 new_ip=192.168.28.20

[client_servers]
# 客户端和工具服务器
client-s1 ansible_host=192.168.13.6 ansible_user=root hostname=client-s1 new_ip=192.168.28.25 services="Flink Client,HDP Client,调度中心,时钟服务器"

[nginx_servers]
# Nginx服务器 - 主要的前端代理服务器
app-s5 ansible_host=192.168.13.10 ansible_user=root hostname=app-s5 new_ip=192.168.28.9 nginx_role="primary"
app-s8 ansible_host=192.168.13.13 ansible_user=root hostname=app-s8 new_ip=192.168.28.12 nginx_role="nf_info_center"
app-s21 ansible_host=192.168.13.30 ansible_user=root hostname=app-s21 new_ip=192.168.28.17 nginx_role="ai_services"

[frontend_servers]
# 前端服务器 - 部署前端静态资源
app-s5 ansible_host=192.168.13.10 ansible_user=root hostname=app-s5 new_ip=192.168.28.9 frontend_path="/semptian/web"

[cbp_all_servers]
# 所有CBP业务系统服务器
nebula-s1 ansible_host=192.168.13.1 ansible_user=root new_ip=192.168.28.1
nebula-s2 ansible_host=192.168.13.2 ansible_user=root new_ip=192.168.28.2
nebula-s3 ansible_host=192.168.13.3 ansible_user=root new_ip=192.168.28.3
mysql-s1 ansible_host=192.168.13.4 ansible_user=root new_ip=192.168.28.4
oracle-s1 ansible_host=192.168.13.5 ansible_user=root new_ip=192.168.28.5
client-s1 ansible_host=192.168.13.6 ansible_user=root new_ip=192.168.28.25
app-s2 ansible_host=192.168.13.7 ansible_user=root new_ip=192.168.28.6
app-s3 ansible_host=192.168.13.8 ansible_user=root new_ip=192.168.28.7
app-s4 ansible_host=192.168.13.9 ansible_user=root new_ip=192.168.28.8
app-s5 ansible_host=192.168.13.10 ansible_user=root new_ip=192.168.28.9
app-s6 ansible_host=192.168.13.11 ansible_user=root new_ip=192.168.28.10
app-s7 ansible_host=192.168.13.12 ansible_user=root new_ip=192.168.28.11
app-s8 ansible_host=192.168.13.13 ansible_user=root new_ip=192.168.28.12
app-s9 ansible_host=192.168.13.14 ansible_user=root new_ip=192.168.28.13
app-s10 ansible_host=192.168.13.15 ansible_user=root new_ip=192.168.28.14
app-s11 ansible_host=192.168.13.16 ansible_user=root new_ip=192.168.28.15
app-s12 ansible_host=192.168.13.17 ansible_user=root new_ip=192.168.28.16
app-s21 ansible_host=192.168.13.30 ansible_user=root new_ip=192.168.28.17
app-s22 ansible_host=192.168.13.31 ansible_user=root new_ip=192.168.28.18
redis-s1 ansible_host=192.168.13.78 ansible_user=root new_ip=192.168.28.19
redis-s2 ansible_host=192.168.13.79 ansible_user=root new_ip=192.168.28.20

[cbp_cluster:children]
nebula_servers
database_servers
app_servers
ai_servers
redis_servers
client_servers

[cbp_cluster:vars]
# 通用变量
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_python_interpreter=/usr/bin/python3
ansible_ssh_timeout=30
ansible_ssh_retries=3

# 网络配置
current_network=192.168.13
current_subnet_mask=255.255.255.0
target_network=192.168.28
target_subnet_mask=255.255.252.0
target_gateway=192.168.31.254

# CBP应用配置
cbp_home=/opt/cbp
app_home=/data1/semptian/service
web_home=/semptian/web
nginx_home=/opt/nginx-1.10.3
config_backup_dir=/tmp/cbp_config_backup

# 服务端口配置
nacos_port=8848
nginx_port=80
cbp_portal_port=8104
mysql_port=3306
oracle_port=1521
redis_port=6379
nebula_meta_port=9559
nebula_graph_port=9669
nebula_storage_port=9779

# 备份和回滚配置
backup_enabled=true
backup_retention_days=30
rollback_enabled=true

# 执行配置
max_concurrent_servers=3
execution_timeout=300
dry_run=false
confirm_before_execute=true

# 监控和告警
monitoring_enabled=true
health_check_enabled=true
alert_on_failure=true

# 日志配置
log_level=INFO
log_file=/var/log/ansible/cbp_ip_change.log
