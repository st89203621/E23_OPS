# CBP应用服务器集群主机清单 - A1机房当前配置
# 当前使用A1机房IP地址: 192.168.13.x
# 共20台CBP应用服务器，包含nebula、mysql、oracle、app、redis等服务
# 子网掩码: 255.255.255.0 (/24)
# 未来搬迁到A2机房: 192.168.28.x

[nebula_servers]
# Nebula图数据库服务器
nebula-s1 ansible_host=192.168.13.1 ansible_user=root hostname=nebula-s1 future_ip=192.168.28.1 idrac_ip=172.20.23.1
nebula-s2 ansible_host=192.168.13.2 ansible_user=root hostname=nebula-s2 future_ip=192.168.28.2 idrac_ip=172.20.23.2
nebula-s3 ansible_host=192.168.13.3 ansible_user=root hostname=nebula-s3 future_ip=192.168.28.3 idrac_ip=172.20.23.3

[database_servers]
# 数据库服务器
mysql-s1 ansible_host=192.168.13.4 ansible_user=root hostname=mysql-s1 future_ip=192.168.28.4 idrac_ip=172.20.23.4
oracle-s1 ansible_host=192.168.13.5 ansible_user=root hostname=oracle-s1 future_ip=192.168.28.5 idrac_ip=172.20.23.5

[app_servers]
# 应用服务器
app-s2 ansible_host=192.168.13.7 ansible_user=root hostname=app-s2 future_ip=192.168.28.6 idrac_ip=172.20.23.7
app-s3 ansible_host=192.168.13.8 ansible_user=root hostname=app-s3 future_ip=192.168.28.7 idrac_ip=172.20.23.8
app-s4 ansible_host=192.168.13.9 ansible_user=root hostname=app-s4 future_ip=192.168.28.8 idrac_ip=172.20.23.9
app-s5 ansible_host=192.168.13.10 ansible_user=root hostname=app-s5 future_ip=192.168.28.9 idrac_ip=172.20.23.10
app-s6 ansible_host=192.168.13.11 ansible_user=root hostname=app-s6 future_ip=192.168.28.10 idrac_ip=172.20.23.11
app-s7 ansible_host=192.168.13.12 ansible_user=root hostname=app-s7 future_ip=192.168.28.11 idrac_ip=172.20.23.12
app-s8 ansible_host=192.168.13.13 ansible_user=root hostname=app-s8 future_ip=192.168.28.12 idrac_ip=172.20.23.13
app-s9 ansible_host=192.168.13.14 ansible_user=root hostname=app-s9 future_ip=192.168.28.13 idrac_ip=172.20.23.14
app-s10 ansible_host=192.168.13.15 ansible_user=root hostname=app-s10 future_ip=192.168.28.14 idrac_ip=172.20.23.15
app-s11 ansible_host=192.168.13.16 ansible_user=root hostname=app-s11 future_ip=192.168.28.15 idrac_ip=172.20.23.16
app-s12 ansible_host=192.168.13.17 ansible_user=root hostname=app-s12 future_ip=192.168.28.16 idrac_ip=172.20.23.17
app-s21 ansible_host=192.168.13.30 ansible_user=root hostname=app-s21 future_ip=192.168.28.17 idrac_ip=172.20.23.30
app-s22 ansible_host=192.168.13.31 ansible_user=root hostname=app-s22 future_ip=192.168.28.18 idrac_ip=172.20.23.31

[redis_servers]
# Redis缓存服务器
redis-s1 ansible_host=192.168.13.78 ansible_user=root hostname=redis-s1 future_ip=192.168.28.19 idrac_ip=172.20.23.78
redis-s2 ansible_host=192.168.13.79 ansible_user=root hostname=redis-s2 future_ip=192.168.28.20 idrac_ip=172.20.23.79

[cbp_all_servers]
# 所有CBP应用服务器节点 - A1机房当前IP地址
nebula-s1 ansible_host=192.168.13.1 ansible_user=root future_ip=192.168.28.1 idrac_ip=172.20.23.1
nebula-s2 ansible_host=192.168.13.2 ansible_user=root future_ip=192.168.28.2 idrac_ip=172.20.23.2
nebula-s3 ansible_host=192.168.13.3 ansible_user=root future_ip=192.168.28.3 idrac_ip=172.20.23.3
mysql-s1 ansible_host=192.168.13.4 ansible_user=root future_ip=192.168.28.4 idrac_ip=172.20.23.4
oracle-s1 ansible_host=192.168.13.5 ansible_user=root future_ip=192.168.28.5 idrac_ip=172.20.23.5
app-s2 ansible_host=192.168.13.7 ansible_user=root future_ip=192.168.28.6 idrac_ip=172.20.23.7
app-s3 ansible_host=192.168.13.8 ansible_user=root future_ip=192.168.28.7 idrac_ip=172.20.23.8
app-s4 ansible_host=192.168.13.9 ansible_user=root future_ip=192.168.28.8 idrac_ip=172.20.23.9
app-s5 ansible_host=192.168.13.10 ansible_user=root future_ip=192.168.28.9 idrac_ip=172.20.23.10
app-s6 ansible_host=192.168.13.11 ansible_user=root future_ip=192.168.28.10 idrac_ip=172.20.23.11
app-s7 ansible_host=192.168.13.12 ansible_user=root future_ip=192.168.28.11 idrac_ip=172.20.23.12
app-s8 ansible_host=192.168.13.13 ansible_user=root future_ip=192.168.28.12 idrac_ip=172.20.23.13
app-s9 ansible_host=192.168.13.14 ansible_user=root future_ip=192.168.28.13 idrac_ip=172.20.23.14
app-s10 ansible_host=192.168.13.15 ansible_user=root future_ip=192.168.28.14 idrac_ip=172.20.23.15
app-s11 ansible_host=192.168.13.16 ansible_user=root future_ip=192.168.28.15 idrac_ip=172.20.23.16
app-s12 ansible_host=192.168.13.17 ansible_user=root future_ip=192.168.28.16 idrac_ip=172.20.23.17
app-s21 ansible_host=192.168.13.30 ansible_user=root future_ip=192.168.28.17 idrac_ip=172.20.23.30
app-s22 ansible_host=192.168.13.31 ansible_user=root future_ip=192.168.28.18 idrac_ip=172.20.23.31
redis-s1 ansible_host=192.168.13.78 ansible_user=root future_ip=192.168.28.19 idrac_ip=172.20.23.78
redis-s2 ansible_host=192.168.13.79 ansible_user=root future_ip=192.168.28.20 idrac_ip=172.20.23.79

[cbp_cluster:children]
nebula_servers
database_servers
app_servers
redis_servers

[cbp_cluster:vars]
# 通用变量
ansible_ssh_common_args='-o StrictHostKeyChecking=no'
ansible_python_interpreter=/usr/bin/python3

# 网络配置 - 基于E23机房搬迁实际配置
# A1机房当前网络配置
current_network=192.168.13
current_subnet_mask=255.255.255.0
current_network_cidr=24

# A2机房未来网络配置
future_network=192.168.28
future_subnet_mask=255.255.252.0
future_network_cidr=22
future_gateway=192.168.31.254

# iDRAC管理网络 (A1机房)
idrac_network=172.20.23
idrac_subnet_mask=255.255.224.0

# CBP应用服务配置
cbp_home=/opt/cbp
app_home=/opt/app
log_dir=/var/log/cbp
config_dir=/etc/cbp

# Nebula图数据库配置
nebula_home=/usr/local/nebula
nebula_meta_port=9559
nebula_graph_port=9669
nebula_storage_port=9779

# 数据库配置
mysql_port=3306
mysql_data_dir=/var/lib/mysql
oracle_port=1521
oracle_home=/opt/oracle

# Redis缓存配置
redis_port=6379
redis_max_memory=4gb
redis_config_dir=/etc/redis
redis_data_dir=/var/lib/redis

# 应用服务器配置
app_port_range=8000-9000
tomcat_home=/opt/tomcat
java_home=/usr/lib/jvm/java-8-openjdk

# SSH配置
ansible_ssh_timeout=30
ansible_ssh_retries=3
ansible_forks=10  # 并发执行数量
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
ansible_ssh_pass=your_password_here  # 请替换为实际密码，或使用--ask-pass参数

# 搬迁配置
migration_phase=phase1
backup_retention_days=30
downtime_window=02:00-06:00

# 监控配置
monitoring_enabled=true
health_check_interval=60
alert_threshold=80
