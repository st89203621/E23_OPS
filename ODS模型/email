-- v64_deye_dw_ods.ods_pr_email_store definition

CREATE EXTERNAL TABLE `v64_deye_dw_ods.ods_pr_email_store`(
  `data_type` string,
  `data_source` string,
  `protocol_type` string,
  `child_type` string,
  `action` string,
  `auth_type` string,
  `auth_account` string,
  `strsrc_ip` string,
  `strdst_ip` string,
  `src_port` int,
  `dst_port` int,
  `strsrc_ip_v6` string,
  `strdst_ip_v6` string,
  `src_port_v6` int,
  `dst_port_v6` int,
  `src_ip_area` string,
  `dst_ip_area` string,
  `host` string,
  `proxy_type` string,
  `proxy_address` string,
  `proxy_provider` string,
  `proxy_account` string,
  `longitude` decimal(16,6),
  `latitude` decimal(16,6),
  `base_station_id` string,
  `ownership_land` string,
  `internet_land` string,
  `uparea_id` string,
  `mail_from` string,
  `mail_to` string,
  `mail_cc` string,
  `mail_bcc` string,
  `mail_date` bigint,
  `text` string,
  `spam_flag` int,
  `forgery_flag` int,
  `encrypt_flag` int,
  `spam_score` decimal(16,2),
  `lang_type` string,
  `abstract` string,
  `attach_names` string,
  `attach_sizes` string,
  `attach_md5s` string,
  `attach_text` string,
  `attach_num` int,
  `keywords` string,
  `attach_download_path` string,
  `file_path` string,
  `file_size` int,
  `file_id` string,
  `file_md5` string,
  `subject` string,
  `charset` string,
  `tool_type` string,
  `tool_name` string,
  `device_id` string,
  `trace_id` string,
  `session_id` string,
  `stream_end_time` bigint,
  `content_type` string,
  `up_teid` string,
  `down_teid` string,
  `application_layer_protocol` string,
  `tunnel_type` string,
  `isp_id` string,
  `imsi` string,
  `imei` string,
  `associate_mobile` string,
  `mobile_phone` string,
  `username` string,
  `password` string,
  `domain` string,
  `url` string,
  `local_action` string,
  `mac` string,
  `hardware_type` string,
  `hardware_sign` string,
  `os_name` string,
  `os_version` string,
  `browse_type` string,
  `browse_version` string,
  `user_agent` string,
  `icp_provider` string,
  `rule_version` string,
  `record_id` string,
  `soft_name` string,
  `favorite_tags` string,
  `host_url_tag` string,
  `software` string,
  `mail_tool_type` string,
  `app_version` string,
  `remark` string,
  `from_nickname` string,
  `to_nickname` string,
  `forgery_user` string,
  `message_id` string,
  `important_level` string,
  `capture_time` bigint,
  `insert_time` bigint,
  `data_id` string,
  `extend_column` string)
PARTITIONED BY (
  `capture_day` string,
  `capture_hour` string)
ROW FORMAT SERDE
  'org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe'
STORED AS INPUTFORMAT
  'org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat'
OUTPUTFORMAT
  'org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat'
LOCATION
  'hdfs://cbpcluster/warehouse/tablespace/external/hive/v64_deye_dw_ods.db/ods_pr_email_store'
TBLPROPERTIES (
  'bucketing_version'='2',
  'discover.partitions'='false',
  'parquet.compression'='GZIP',
  'partition.time-extractor.timestamp-pattern'='$capture_day $capture_hour:00:00',
  'sink.partition-commit.delay'='5 min',
  'sink.partition-commit.policy.kind'='metastore,success-file',
  'spark.sql.create.version'='2.2 or prior',
  'spark.sql.sources.schema.numPartCols'='2',
  'spark.sql.sources.schema.numParts'='2',
  'spark.sql.sources.schema.part.0'='{"type":"struct","fields":[{"name":"data_type","type":"string","nullable":true,"metadata":{}},{"name":"data_source","type":"string","nullable":true,"metadata":{}},{"name":"protocol_type","type":"string","nullable":true,"metadata":{}},{"name":"child_type","type":"string","nullable":true,"metadata":{}},{"name":"action","type":"string","nullable":true,"metadata":{}},{"name":"auth_type","type":"string","nullable":true,"metadata":{}},{"name":"auth_account","type":"string","nullable":true,"metadata":{}},{"name":"strsrc_ip","type":"string","nullable":true,"metadata":{}},{"name":"strdst_ip","type":"string","nullable":true,"metadata":{}},{"name":"src_port","type":"integer","nullable":true,"metadata":{}},{"name":"dst_port","type":"integer","nullable":true,"metadata":{}},{"name":"strsrc_ip_v6","type":"string","nullable":true,"metadata":{}},{"name":"strdst_ip_v6","type":"string","nullable":true,"metadata":{}},{"name":"src_port_v6","type":"integer","nullable":true,"metadata":{}},{"name":"dst_port_v6","type":"integer","nullable":true,"metadata":{}},{"name":"src_ip_area","type":"string","nullable":true,"metadata":{}},{"name":"dst_ip_area","type":"string","nullable":true,"metadata":{}},{"name":"host","type":"string","nullable":true,"metadata":{}},{"name":"proxy_type","type":"string","nullable":true,"metadata":{}},{"name":"proxy_address","type":"string","nullable":true,"metadata":{}},{"name":"proxy_provider","type":"string","nullable":true,"metadata":{}},{"name":"proxy_account","type":"string","nullable":true,"metadata":{}},{"name":"longitude","type":"decimal(16,6)","nullable":true,"metadata":{}},{"name":"latitude","type":"decimal(16,6)","nullable":true,"metadata":{}},{"name":"base_station_id","type":"string","nullable":true,"metadata":{}},{"name":"ownership_land","type":"string","nullable":true,"metadata":{}},{"name":"internet_land","type":"string","nullable":true,"metadata":{}},{"name":"uparea_id","type":"string","nullable":true,"metadata":{}},{"name":"mail_from","type":"string","nullable":true,"metadata":{}},{"name":"mail_to","type":"string","nullable":true,"metadata":{}},{"name":"mail_cc","type":"string","nullable":true,"metadata":{}},{"name":"mail_bcc","type":"string","nullable":true,"metadata":{}},{"name":"mail_date","type":"long","nullable":true,"metadata":{}},{"name":"text","type":"string","nullable":true,"metadata":{}},{"name":"spam_flag","type":"integer","nullable":true,"metadata":{}},{"name":"forgery_flag","type":"integer","nullable":true,"metadata":{}},{"name":"encrypt_flag","type":"integer","nullable":true,"metadata":{}},{"name":"spam_score","type":"decimal(16,2)","nullable":true,"metadata":{}},{"name":"lang_type","type":"string","nullable":true,"metadata":{}},{"name":"abstract","type":"string","nullable":true,"metadata":{}},{"name":"attach_names","type":"string","nullable":true,"metadata":{}},{"name":"attach_sizes","type":"string","nullable":true,"metadata":{}},{"name":"attach_md5s","type":"string","nullable":true,"metadata":{}},{"name":"attach_text","type":"string","nullable":true,"metadata":{}},{"name":"attach_num","type":"integer","nullable":true,"metadata":{}},{"name":"keywords","type":"string","nullable":true,"metadata":{}},{"name":"attach_download_path","type":"string","nullable":true,"metadata":{}},{"name":"file_path","type":"string","nullable":true,"metadata":{}},{"name":"file_size","type":"integer","nullable":true,"metadata":{}},{"name":"file_id","type":"string","nullable":true,"metadata":{}},{"name":"file_md5","type":"string","nullable":true,"metadata":{}},{"name":"subject","type":"string","nullable":true,"metadata":{}},{"name":"charset","type":"string","nullable":true,"metadata":{}},{"name":"tool_type","type":"string","nullable":true,"metadata":{}},{"name":"tool_name","type":"string","nullable":true,"metadata":{}},{"name":"device_id","type":"string","nullable":true,"metadata":{}},{"name":"trace_id","type":"string","nullable":true,"metadata":{}},{"name":"session_id","type":"string","nullable":true,"metadata":{}},{"name"',
  'spark.sql.sources.schema.part.1'=':"stream_end_time","type":"long","nullable":true,"metadata":{}},{"name":"content_type","type":"string","nullable":true,"metadata":{}},{"name":"up_teid","type":"string","nullable":true,"metadata":{}},{"name":"down_teid","type":"string","nullable":true,"metadata":{}},{"name":"application_layer_protocol","type":"string","nullable":true,"metadata":{}},{"name":"tunnel_type","type":"string","nullable":true,"metadata":{}},{"name":"isp_id","type":"string","nullable":true,"metadata":{}},{"name":"imsi","type":"string","nullable":true,"metadata":{}},{"name":"imei","type":"string","nullable":true,"metadata":{}},{"name":"associate_mobile","type":"string","nullable":true,"metadata":{}},{"name":"mobile_phone","type":"string","nullable":true,"metadata":{}},{"name":"username","type":"string","nullable":true,"metadata":{}},{"name":"password","type":"string","nullable":true,"metadata":{}},{"name":"domain","type":"string","nullable":true,"metadata":{}},{"name":"url","type":"string","nullable":true,"metadata":{}},{"name":"local_action","type":"string","nullable":true,"metadata":{}},{"name":"mac","type":"string","nullable":true,"metadata":{}},{"name":"hardware_type","type":"string","nullable":true,"metadata":{}},{"name":"hardware_sign","type":"string","nullable":true,"metadata":{}},{"name":"os_name","type":"string","nullable":true,"metadata":{}},{"name":"os_version","type":"string","nullable":true,"metadata":{}},{"name":"browse_type","type":"string","nullable":true,"metadata":{}},{"name":"browse_version","type":"string","nullable":true,"metadata":{}},{"name":"user_agent","type":"string","nullable":true,"metadata":{}},{"name":"icp_provider","type":"string","nullable":true,"metadata":{}},{"name":"rule_version","type":"string","nullable":true,"metadata":{}},{"name":"record_id","type":"string","nullable":true,"metadata":{}},{"name":"soft_name","type":"string","nullable":true,"metadata":{}},{"name":"favorite_tags","type":"string","nullable":true,"metadata":{}},{"name":"host_url_tag","type":"string","nullable":true,"metadata":{}},{"name":"software","type":"string","nullable":true,"metadata":{}},{"name":"mail_tool_type","type":"string","nullable":true,"metadata":{}},{"name":"app_version","type":"string","nullable":true,"metadata":{}},{"name":"remark","type":"string","nullable":true,"metadata":{}},{"name":"from_nickname","type":"string","nullable":true,"metadata":{}},{"name":"to_nickname","type":"string","nullable":true,"metadata":{}},{"name":"forgery_user","type":"string","nullable":true,"metadata":{}},{"name":"message_id","type":"string","nullable":true,"metadata":{}},{"name":"important_level","type":"string","nullable":true,"metadata":{}},{"name":"capture_time","type":"long","nullable":true,"metadata":{}},{"name":"insert_time","type":"long","nullable":true,"metadata":{}},{"name":"data_id","type":"string","nullable":true,"metadata":{}},{"name":"extend_column","type":"string","nullable":true,"metadata":{}},{"name":"capture_day","type":"string","nullable":true,"metadata":{}},{"name":"capture_hour","type":"string","nullable":true,"metadata":{}}]}',
  'spark.sql.sources.schema.partCol.0'='capture_day',
  'spark.sql.sources.schema.partCol.1'='capture_hour',
  'transient_lastDdlTime'='1744020382');
