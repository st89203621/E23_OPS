# DWDå’ŒADSä¸€è‡´æ€§ç»Ÿè®¡ - ç¦»çº¿PythonåŒ…

## ğŸ“¦ æ¦‚è¿°

è¿™ä¸ªç›®å½•åŒ…å«äº†DWDå’ŒADSä¸€è‡´æ€§ç»Ÿè®¡æ‰€éœ€çš„æ‰€æœ‰PythonåŒ…ï¼Œæ”¯æŒå®Œå…¨ç¦»çº¿å®‰è£…ã€‚å°±åƒIAM_USER_STATEé¡¹ç›®ä¸€æ ·ï¼Œæ‰€æœ‰ä¾èµ–åŒ…éƒ½å·²é¢„å…ˆä¸‹è½½ï¼Œæ— éœ€ç½‘ç»œè¿æ¥å³å¯å®‰è£…ã€‚

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```
offline_packages/
â”œâ”€â”€ README.md                    # æœ¬è¯´æ˜æ–‡ä»¶
â”œâ”€â”€ offline_installer.py         # ä¸“ç”¨ç¦»çº¿å®‰è£…è„šæœ¬
â”œâ”€â”€ download_packages.py         # åŒ…ä¸‹è½½è„šæœ¬ï¼ˆç”¨äºæ›´æ–°åŒ…ï¼‰
â”œâ”€â”€ requirements-offline.txt     # ç¦»çº¿åŒ…åˆ—è¡¨
â””â”€â”€ *.whl, *.tar.gz             # PythonåŒ…æ–‡ä»¶ï¼ˆéœ€è¦ä¸‹è½½ï¼‰
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
ä¸»å®‰è£…è„šæœ¬ `setup_and_run.sh` ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ç¦»çº¿åŒ…ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
./setup_and_run.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹ `offline_packages` ç›®å½•
2. ä½¿ç”¨ `offline_installer.py` è¿›è¡Œç¦»çº¿å®‰è£…
3. å¦‚æœç¦»çº¿å®‰è£…å¤±è´¥ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°åœ¨çº¿å®‰è£…

### æ–¹æ³•2ï¼šæ‰‹åŠ¨ç¦»çº¿å®‰è£…
å¦‚æœéœ€è¦å•ç‹¬å®‰è£…Pythonä¾èµ–ï¼š

```bash
cd offline_packages
python3 offline_installer.py
```

## ğŸ“¥ ä¸‹è½½PythonåŒ…

**é‡è¦ï¼šå½“å‰ç›®å½•åªåŒ…å«å®‰è£…è„šæœ¬ï¼Œè¿˜éœ€è¦ä¸‹è½½å®é™…çš„PythonåŒ…æ–‡ä»¶ã€‚**

### åœ¨æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸­ä¸‹è½½åŒ…ï¼š

```bash
cd offline_packages
python3 download_packages.py
```

è¿™å°†ä¸‹è½½ä»¥ä¸‹åŒ…ï¼š
- **åŸºç¡€ä¾èµ–**: six, setuptools, wheel
- **é…ç½®è§£æ**: PyYAML
- **Hiveè¿æ¥**: thrift, pure-sasl, sasl, thrift-sasl, PyHive
- **ESè¿æ¥**: urllib3, certifi, elastic-transport, elasticsearch

### æ‰‹åŠ¨ä¸‹è½½ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰ï¼š

```bash
cd offline_packages

# ä¸‹è½½æ‰€æœ‰ä¾èµ–åŒ…
pip download PyYAML PyHive "elasticsearch<9.0.0" thrift sasl pure-sasl --dest .
```

## ğŸ”§ ç¦»çº¿å®‰è£…å™¨ç‰¹æ€§

`offline_installer.py` å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

1. **æ™ºèƒ½ä¾èµ–å¤„ç†**: æŒ‰æ­£ç¡®é¡ºåºå®‰è£…åŒ…ï¼Œå¤„ç†ä¾èµ–å…³ç³»
2. **ç”¨æˆ·ç›®å½•å®‰è£…**: å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼Œé¿å…ç³»ç»Ÿæƒé™é—®é¢˜
3. **é”™è¯¯å¤„ç†**: è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Šå’Œå¤±è´¥åŒ…åˆ—è¡¨
4. **å®‰è£…éªŒè¯**: è‡ªåŠ¨éªŒè¯æ‰€æœ‰æ ¸å¿ƒåŒ…æ˜¯å¦å¯ä»¥æ­£å¸¸å¯¼å…¥
5. **è·¨å¹³å°æ”¯æŒ**: æ”¯æŒLinuxå’ŒWindowsç¯å¢ƒ

## ğŸ“‹ åŒ…åˆ—è¡¨

### æ ¸å¿ƒä¾èµ–åŒ…ï¼š
- `PyYAML` - YAMLé…ç½®æ–‡ä»¶è§£æ
- `PyHive` - Hiveæ•°æ®åº“è¿æ¥
- `elasticsearch` - Elasticsearchå®¢æˆ·ç«¯
- `thrift` - Apache Thriftæ¡†æ¶
- `sasl` - SASLè®¤è¯æ”¯æŒ
- `pure-sasl` - çº¯Python SASLå®ç°
- `thrift-sasl` - Thrift SASLæ”¯æŒ

### åŸºç¡€ä¾èµ–ï¼š
- `six` - Python 2/3å…¼å®¹æ€§
- `setuptools` - åŒ…ç®¡ç†å·¥å…·
- `wheel` - Wheelæ ¼å¼æ”¯æŒ
- `urllib3` - HTTPå®¢æˆ·ç«¯
- `certifi` - SSLè¯ä¹¦
- `elastic-transport` - ESä¼ è¾“å±‚

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šæ²¡æœ‰åŒ…æ–‡ä»¶
```
é”™è¯¯: å½“å‰ç›®å½•ä¸‹æ²¡æœ‰æ‰¾åˆ°PythonåŒ…æ–‡ä»¶
```

**è§£å†³æ–¹æ¡ˆ**: è¿è¡Œä¸‹è½½è„šæœ¬
```bash
python3 download_packages.py
```

### é—®é¢˜2ï¼šå¯¼å…¥å¤±è´¥
```
âœ— pyhive - å¯¼å…¥å¤±è´¥! Reason: No module named 'pyhive'
```

**è§£å†³æ–¹æ¡ˆ**: 
1. æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä¾èµ–åŒ…éƒ½å®‰è£…æˆåŠŸ
2. å°è¯•æ‰‹åŠ¨å®‰è£…å¤±è´¥çš„åŒ…ï¼š
   ```bash
   pip3 install --user PyHive
   ```

### é—®é¢˜3ï¼šæƒé™é—®é¢˜
```
Permission denied: '/usr/local/lib/python3.x/site-packages'
```

**è§£å†³æ–¹æ¡ˆ**: ç¦»çº¿å®‰è£…å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨ç”¨æˆ·ç›®å½•ï¼Œæ— éœ€rootæƒé™

### é—®é¢˜4ï¼šå¹³å°å…¼å®¹æ€§
æŸäº›åŒ…å¯èƒ½æœ‰å¹³å°ç‰¹å®šç‰ˆæœ¬ï¼ˆå¦‚Linux x86_64ï¼‰ï¼Œå¦‚æœåœ¨ä¸åŒå¹³å°ä¸Šå®‰è£…å¤±è´¥ï¼Œå¯ä»¥ï¼š

1. é‡æ–°ä¸‹è½½é€‚åˆç›®æ ‡å¹³å°çš„åŒ…
2. ä½¿ç”¨åœ¨çº¿å®‰è£…ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ

## ğŸ“Š å®‰è£…éªŒè¯

å®‰è£…å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨éªŒè¯ä»¥ä¸‹æ¨¡å—ï¼š
- âœ“ yaml (PyYAML)
- âœ“ pyhive (PyHive)  
- âœ“ elasticsearch (elasticsearch)
- âœ“ thrift (thrift)
- âœ“ sasl (sasl)

å¦‚æœæ‰€æœ‰æ¨¡å—éƒ½æ˜¾ç¤º"å¯¼å…¥æˆåŠŸ"ï¼Œè¯´æ˜ç¯å¢ƒå·²å‡†å¤‡å°±ç»ªã€‚

## ğŸ”„ æ›´æ–°åŒ…

å¦‚éœ€æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„åŒ…ï¼š

```bash
cd offline_packages

# æ¸…ç†æ—§åŒ…
rm -f *.whl *.tar.gz

# é‡æ–°ä¸‹è½½
python3 download_packages.py
```

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡ä½¿ç”¨**: ç¡®ä¿å…ˆè¿è¡Œ `download_packages.py` ä¸‹è½½åŒ…æ–‡ä»¶
2. **ç½‘ç»œç¯å¢ƒ**: ä¸‹è½½è„šæœ¬éœ€è¦ç½‘ç»œè¿æ¥ï¼Œä½†å®‰è£…è„šæœ¬å®Œå…¨ç¦»çº¿
3. **å­˜å‚¨ç©ºé—´**: æ‰€æœ‰åŒ…æ–‡ä»¶å¤§çº¦éœ€è¦50-100MBå­˜å‚¨ç©ºé—´
4. **å…¼å®¹æ€§**: æ”¯æŒPython 3.6+ï¼Œæ¨èPython 3.8+

è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œä¸€æ—¦ä¸‹è½½å®Œæˆï¼Œæ•´ä¸ªé¡¹ç›®å°±å¯ä»¥åœ¨ä»»ä½•LinuxæœåŠ¡å™¨ä¸Šå®Œå…¨ç¦»çº¿éƒ¨ç½²å’Œè¿è¡Œï¼
